---
import { config } from "../lib/config";
import DarkModeToggle from "./DarkModeToggle.astro";
import LanguageToggle from "./LanguageToggle.astro";

const navbar = [
  ["https://wasona.com/", "Course"],
  ["https://lipu.pona.la/", "Library"],
  ["https://sin-kulupu.pona.la/", "News"],
  ["https://discord.gg/6zkugJFU4x", "Discord"],
  ["https://pona.la/", "More"],
];
---

<style>
  header {
    position: relative;
    max-width: 850px;
    text-align: center;
    border-bottom: 5px dotted var(--accent);
    padding: 20px 0;
    margin: auto;
    margin-top: 10px;
  }
  img {
    max-width: 100%;
    max-height: 150px;
  }
  a:has(img) {
    display: block; /*fix focus styling on main header*/
  }
  a {
    text-decoration: none;
    /* color: var(--txt); */
  }
</style>

<header>
  {
    config.use_navbar && (
      <div style="font-weight: 700">
        {navbar
          .map(([url, label]) =>
            `https://${config.hostname}/` == url ? (
              <span>{label}</span>
            ) : (
              <a href={url}>{label}</a>
            ),
          )
          .reduce((prev, curr, i) => (
            <>
              {prev} {" Â· "} {curr}
            </>
          ))}
      </div>
    )
  }
  <a
    href={config.use_language_toggle
      ? `/${Astro.url.pathname.split("/")[1]}`
      : "/"}
  >
    <img alt={config.hostname} src="/header.svg" />
  </a>
  <DarkModeToggle />
  {config.use_language_toggle && <LanguageToggle />}
  <slot />
</header>
